<xacro:macro name="passform_link" params="name mesh_path scale:='1 1 1' mass:=0.1 color:='Grey' use_collision:=true">
  <link name="${name}">
    <visual>
      <geometry>
        <mesh filename="package://passform_agent_resources/meshes/${mesh_path}" scale="${scale}"/>
      </geometry>
      <material name="${color}"/>
    </visual>

    <xacro:if value="${use_collision}">
      <collision>
        <geometry>
          <mesh filename="package://passform_agent_resources/meshes/${mesh_path}" scale="${scale}"/>
        </geometry>
      </collision>
    </xacro:if>

    <inertial>
      <mass value="${mass}"/>
      <inertia ixx="${(1/12) * mass * (0.1**2 + 0.1**2)}" ixy="0" ixz="0" 
               iyy="${(1/12) * mass * (0.1**2 + 0.1**2)}" iyz="0" 
               izz="${(1/12) * mass * (0.1**2 + 0.1**2)}"/>
    </inertial>
  </link>
</xacro:macro>