@use '../base/variables' as *;

// --- SIDEBAR ORGANISM ---
.sidebar-container {
    display: flex;
    flex-direction: row; // Rail links (1.), Drawer rechts (2.)
    @apply h-full shrink-0 relative text-white bg-bg-main;
    
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: width;

    width: var(--rail-width);

    &.sidebar-open {
        width: calc(var(--drawer-width) + var(--rail-width));
    }
}

// 1. NAVIGATION RAIL
.sidebar-rail {
    @apply h-full bg-rail-bg flex flex-col items-center py-lg gap-md 
           border-l border-white/5 shrink-0;
    width: var(--rail-width);
    padding-left: 5px;
    padding-right: 5px;
    z-index: 20;

    .rail-btn {
        @apply transition-all duration-200 text-muted opacity-60 flex items-center justify-center rounded-industrial;
        width: 48px;
        height: 48px;
        
        svg {
            width: 24px;
            height: 24px;
        }

        &.active { @apply opacity-100 text-info bg-white/5; }
        &:hover { @apply opacity-100 text-white bg-white/10; }
    }

    .toggle-btn {
        @apply mt-auto text-2xl font-bold py-md border-t border-white/5 w-full text-center text-muted;
        cursor: pointer;
        &:hover { @apply text-white; }
    }
}

// 2. CONTENT DRAWER
.sidebar-content {
    @apply bg-drawer-bg flex flex-col shadow-2xl shrink-0;
    width: var(--drawer-width);
    min-width: var(--drawer-width); 
    border-l: 1px solid rgba(255, 255, 255, 0.05);

    .sidebar-tab-header {
        @apply bg-black/20 border-b border-white/5 shrink-0;
        h2 { @apply px-lg py-5 text-[1.1rem] font-bold text-info m-0 whitespace-nowrap; }
    }

    // HIER: Fix für die Panel-Breite
    .tab-body {
        @apply flex-1 flex flex-col overflow-x-hidden;
        
        // Damit die Inhalte (Planning, Agents etc.) die volle Breite nutzen
        > div {
            @apply w-full;
        }
    }
}

.sidebar-content {
    @apply h-full bg-drawer-bg flex flex-col shadow-2xl shrink-0;
    width: var(--drawer-width);
    min-width: var(--drawer-width); 
    max-width: var(--drawer-width); // Harte Grenze nach rechts
    border-l: 1px solid rgba(255, 255, 255, 0.05);
    overflow: auto !important;
}

// 3. INNERE SEKTIONEN (Fix für das "nach rechts gerückt" Gefühl)
// Diese Klassen werden in deinen Tabs (Planning, Agents etc.) genutzt
.sidebar-tab-content, .sidebar-section {
    overflow: auto !important;
    @apply w-full flex flex-col gap-4 py-lg;

    // Standard-Padding für alle Texte und Inputs
    h3, h4, .coord-display, .planning-section, label, .sidebar-section-item {
        @apply px-lg;
    }

    // Spezieller Fix: Damit Buttons und Inputs im Panel wirklich mittig/voll sind
    input, button.btn-full, .btn-primary {
        @apply mx-lg; // Zentriert sie mit Margin, falls Breite nicht 100% ist
        width: calc(100% - 2 * var(--spacing-lg, 1.5rem)); 
    }
}