@use "sass:color";
@use '../base/variables' as *;

// --- MODAL ORGANISM ---

.modal-overlay {
    @apply fixed inset-0 w-screen h-screen bg-black/80 backdrop-blur-md 
           flex justify-center items-center z-[2000] p-4;
    
    animation: modalFadeIn 0.3s ease-out;
}

.modal-content {
    display: flex !important;
    flex-direction: column !important;
    // REDUZIERT: Ein Viertel vom ursprünglichen Abstand (0.5rem = 8px)
    gap: 0.5rem !important; 

    @apply bg-nav-bg/95 border border-info/30 p-lg rounded-xl 
           w-full max-w-[420px] max-h-[90vh]
           shadow-2xl shadow-black/50 text-white relative;

    h3 {
        // Padding unten ebenfalls leicht reduziert für die Kompaktheit
        @apply m-0 text-[1.3rem] text-center border-b border-white/10 pb-4 
               font-bold uppercase tracking-widest text-info;
    }

    .modal-body {
        @apply overflow-y-auto pr-2 flex flex-col;
        
        &::-webkit-scrollbar { @apply w-1; }
        &::-webkit-scrollbar-track { @apply bg-transparent; }
        &::-webkit-scrollbar-thumb { @apply bg-white/10 rounded-full; }
    }

    // Container für Buttons und Formulare
    .settings-form {
        display: flex !important;
        flex-direction: column !important;
        // REDUZIERT: Ein Viertel vom ursprünglichen Abstand (0.5rem = 8px)
        gap: 0.5rem !important; 
        
        @apply w-full;
    }

    // --- DIE BUTTONS (Volle Breite bleibt erhalten) ---
    .btn-full {
        display: block !important;
        width: 100% !important;
        flex-shrink: 0 !important;

        // Padding leicht angepasst (py-3 statt py-4) für den kompakteren Look
        @apply py-3 px-6 rounded-industrial-sm font-black 
               transition-all duration-200 text-center border-none cursor-pointer
               text-[0.95rem] uppercase tracking-wider shadow-lg;
        
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.4);

        &:hover:not(:disabled) {
            @apply -translate-y-1 brightness-110;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.5);
        }

        &:active:not(:disabled) {
            @apply translate-y-0 scale-[0.98];
        }

        &:disabled {
            @apply opacity-30 cursor-not-allowed shadow-none;
        }
    }

    // --- AGENT TYPEN FARBEN ---
    .btn-ftf { @apply bg-warning text-black !important; }

    .btn-secondary { 
        @apply bg-white/5 text-white border border-white/10 !important; 
        &:hover { @apply bg-white/10 border-white/20; }
    }

    .btn-path-start { @apply bg-success/20 text-success border border-success/30 !important; }
    .btn-path-goal { @apply bg-info/20 text-info border border-info/30 !important; }

    .btn-nfc-write {
        @apply bg-gradient-to-br from-[#ed8936] to-[#dd6b20] text-white font-bold 
               shadow-[0_4px_12px_rgba(221,107,32,0.4)] !important;
    }

    // --- TYPOGRAPHY & BADGES ---
    .agent-id-badge {
        @apply bg-white/5 text-info font-mono text-[0.85rem] 
               py-2 px-3 rounded-industrial-sm text-center border border-info/20;
    }

    .status-text, .signal-value { 
        @apply text-white opacity-100 font-bold !important; 
    }

    .last-written-info {
        @apply p-sm bg-success/10 border border-success/30 rounded-industrial-sm 
               text-success text-center text-[0.85rem] font-bold animate-pulse;
    }

    // Footer & Schließen
    .modal-footer {
        @apply w-full flex justify-center mt-2;
    }

    .btn-close {
        @apply bg-transparent text-white/40 underline text-[0.85rem] 
               border-none cursor-pointer transition-colors;
        &:hover { @apply text-white; }
    }
}

// Fix für die Hardware-Pills (Horizontaler Gap von 1rem bleibt für die Lesbarkeit)
.hardware-status-row {
    display: flex !important;
    flex-direction: row !important;
    @apply gap-4 w-full;
    
    .hardware-pill {
        @apply flex-1 flex items-center justify-center py-2 px-4 
               bg-white/5 border border-white/10 rounded-lg;
    }
}

@keyframes modalFadeIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
}